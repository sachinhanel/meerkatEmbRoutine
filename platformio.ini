[env:esp32-uart]
platform = espressif32 @ ^6.6.0
board = esp32-s3-devkitc-1            ; good generic for ESP32-WROOM/WROVER dev boards
framework = arduino
upload_protocol = esptool   ; UART via CP210x
upload_port = COM4
upload_speed = 921600       ; if flaky, try 460800 or 115200
monitor_speed = 115200
monitor_filters = esp32_exception_decoder

lib_deps =
  sandeepmistry/LoRa@^0.8.0
  jgromes/RadioLib@^6.4.2
  robtillaart/MS5611@^0.3.7

; Test mode configuration - no hardware needed
[env:esp32-test]
platform = espressif32 @ ^6.6.0
board = esp32-s3-devkitc-1
framework = arduino
upload_protocol = esptool
upload_port = COM4
upload_speed = 921600
monitor_speed = 115200
monitor_filters = esp32_exception_decoder
monitor_port = COM4
build_flags =
  -D TEST_MODE=1           ; Enable test mode - bypass all sensor hardware
  -D ARDUINO_USB_CDC_ON_BOOT=1  ; Enable USB-CDC for ESP32-S3

; Exclude sensor source files in test mode
build_src_filter =
  +<*>
  -<sensors/>

lib_deps =
  ; No sensor libraries needed in test mode
